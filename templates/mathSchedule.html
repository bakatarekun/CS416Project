{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>

    <title>Second Website</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="myCss2.css">
    <script src="{% static 'myJs.js' %}"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<script type="text/javascript">

        $(document).ready(function(){
            $.ajax({
                type: "GET",
                url: "/allTutorsNames/",
                dataType: "json",
                contentType: "application/json",
                success: function (data) {
                    /*for(i=0;i<data.length;i++)
                     {
                         tutors[i]= data[i].fields.firstname;
                         console.log(tutors[i]);

                     }*/
                    console.log(data[0]);
                    makerows(data);
                },

                error: function () {

                    alert("wasn't succesful");

                }
            });


        });


        function makerows(tutors) {

            var setoftutors = tutors;
            var counter = 9;
            var rowcounter = 0;
            var content = " <table>" + "<tbody name='tb'>"
            content += '<div><tr>'
            for (s = 8; s < 33; s++) {

                if (s > 8) {
                    if (s % 2 == 0) {
                        counter++;
                        content += '<th class="thformat">' + counter + ': 00' + '</th>'
                    } else {
                        content += '<th class="thformat">' + counter + ': 30' + '</th>'
                    }
                } else {
                    content += '<th class="thformat">' + '&nbsp' + '</th>'
                }
            }

            content += '</div></tr>';

            for (i = 0; i < setoftutors.length; i++) {
                content += '<tr name="rowtest">'
                for (s = 0; s < 25; s++) {

                    if (s == 0) {
                        content += '<td class="tdformat">' + setoftutors[i].fields.firstname + '</td>'
                        rowcounter++
                    } else {
                        if(setoftutors[i].fields.typeofstaff == 'EA')
                        { content += '<td class="tdformat" name="eacell" >' + '&nbsp' + '</td>'}
                        else if (setoftutors[i].fields.typeofstaff == 'SA')
                        {
                            content += '<td class="tdformat"  name="sacell" >' + '&nbsp' + '</td>'
                        }
                        else
                        {
                            content += '<td class="tdformat"  name="workstudy" >' + '&nbsp' + '</td>'
                        }
                    }

                }
                content += '</tr>';
            }

            content += "<tbody>" + "</table>"
            $('#here_table').append(content);

            togglecells("td[name=eacell]","eacellcolor");
            togglecells( "td[name=sacell]","sacellcolor");
            togglecells( "td[name=workstudy]","wscellcolor");

        }

    </script>


    <style type="text/css">
        table {
            border: 1px solid black;

        }
        th, td {
            border: 1px solid black;
             width:60px;
            text-align: center;
        }
        .eacellcolor {
            background: greenyellow;
        }
        .sacellcolor {
            background: deepskyblue;
        }
        .wscellcolor {
            background: yellow;
        }
        .tdformat{
            font-size: x-large;
            height: auto;
            width:auto;
        }
        .thformat{
              font-size: large;
            height: auto;

        }

    </style>
</head>

<!-- body of the site -->
<body id="top">
<br>
<br>
<div  style="text-align: center;">
    <h1>Math Tutor Schedule</h1>
    <h3>Monday</h3>
</div>
<br>

<div align='center' id="here_table"></div>
</body>
</html>
